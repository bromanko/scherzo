---
id: s-a704
status: done
deps: [s-a703]
links: []
created: 2026-01-22T18:45:00Z
type: task
priority: 2
assignee: Brian Romanko
parent: s-a700
tags: [phase-5g, agent, process]
---
# Integrate custom config into agent process

Modify `src/scherzo/agent/process.gleam` to load and apply custom agent configurations.

## Changes

Update `handle_start()` to:

1. Load custom config before workspace creation
2. Fail loudly on invalid config (no silent failures)

```gleam
case agent_config.load_task_config(state.config.working_dir) {
  Error(err) -> {
    process.send(reply_to, StartFailed("Invalid agent config: " <> err))
    actor.continue(state)
  }
  Ok(custom_config) -> {
    case workspace.create(workspace_config, task, Some(custom_config)) {
      // ...
    }
  }
}
```

## Acceptance Criteria

- [x] Custom config loaded before workspace creation
- [x] Invalid JSON returns StartFailed with clear error message
- [x] Missing config directory works (empty config used)
- [x] Custom config passed to workspace.create()
