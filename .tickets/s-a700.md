---
id: s-a700
status: open
deps: []
links: [docs/agent-config.md]
created: 2026-01-22T18:45:00Z
type: epic
priority: 2
assignee: Brian Romanko
tags: [phase-5g, config, agents]
---
# Phase 5g: Custom Agent Configurations

Allow users to customize Claude agent behavior via files in `.scherzo/agents/<name>/`.

## Scope

- Claude-only (Codex/Gemini deferred)
- Task agent config only (gate agent config deferred to Phase 5c-5e)

## Key Design Decisions

- CLAUDE.md written to workspace root (not .claude/)
- settings.json merged with auto-generated hooks (by event)
- Invalid JSON fails loudly (no silent failures)
- Both files restored on workspace cleanup via jj restore

## Deliverables

1. Agent config loader (`config/agent_config.gleam`)
2. Settings merger (`config/settings_merger.gleam`)
3. Workspace integration (modified `workspace.gleam`)
4. Process integration (modified `process.gleam`)
5. Init stubs (modified `init.gleam`)

## Acceptance Criteria

- Custom CLAUDE.md appears in agent workspace root
- Custom hooks merge with auto-generated hooks
- Invalid config fails loudly with clear error message
- Workspace cleanup restores injected files

See `docs/agent-config.md` for detailed design.
